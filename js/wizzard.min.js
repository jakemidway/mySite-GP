window.addEventListener("load",windowLoadHandler,!1);let sphereRad=1080,scale=1.5;function windowLoadHandler(){canvasApp()}function canvasApp(){let e,t,a,l,n,r,i,d,o,h,s,c,u,p,f,v,x,M,g,m,w,y,V,k,X,Y,j,I,P,R,z,Z,E,L,H,b,A,B,T,C,S=document.getElementById("sphere"),W=document.getElementById("sphere-wrap"),q=S.getContext("2d");function D(){l=1,n=l-1,r=8,Y="rgba(169,195,238,0.1)",o=1,e=S.width=W.offsetWidth,t=S.height=W.offsetHeight,h=320,c=e/3,u=t/2,p=h-2,i={},d={},y=.1,V=.1,k=.1,X=-0,m=2.4,x=0,M=0,g=-3-sphereRad,w=-750,v=2*Math.PI/8e3,f=0,a=setInterval(F,10/24)}function F(){if(n++,n>=l)for(n=0,H=0;H<r;H++){b=2*Math.random()*Math.PI,A=Math.acos(2*Math.random()-1),B=sphereRad*Math.sin(A)*Math.cos(b),T=sphereRad*Math.sin(A)*Math.sin(b),C=sphereRad*Math.cos(A);let e=G(B,M+T,g+C,.002*B,.002*T,.002*C);e.attack=50,e.hold=50,e.decay=100,e.initValue=0,e.holdValue=o,e.lastValue=0,e.stuckTime=90+20*Math.random(),e.accelX=0,e.accelY=X,e.accelZ=0}for(f=(f+v)%(2*Math.PI),R=Math.sin(f),z=Math.cos(f),q.clearRect(0,0,e,t),j=i.first;null!=j;)P=j.next,j.age++,j.age>j.stuckTime&&(j.velX+=j.accelX+y*(2*Math.random()-1),j.velY+=j.accelY+V*(2*Math.random()-1),j.velZ+=j.accelZ+k*(2*Math.random()-1),j.x+=j.velX,j.y+=j.velY,j.z+=j.velZ),Z=z*j.x+R*(j.z-g),E=-R*j.x+z*(j.z-g)+g,s=scale*h/(h-E),j.projX=Z*s+c,j.projY=j.y*s+u,j.age<j.attack+j.hold+j.decay?j.age<j.attack?j.alpha=(j.holdValue-j.initValue)/j.attack*j.age+j.initValue:j.age<j.attack+j.hold?j.alpha=j.holdValue:j.age<j.attack+j.hold+j.decay&&(j.alpha=(j.lastValue-j.holdValue)/j.decay*(j.age-j.attack-j.hold)+j.holdValue):j.dead=!0,I=j.projX>e||j.projX<0||j.projY<0||j.projY>t||E>p,I||j.dead?J(j):(L=1-E/w,L=L>1?1:L<0?0:L,q.fillStyle=Y+L*j.alpha+")",q.beginPath(),q.arc(j.projX,j.projY,s*m,0,2*Math.PI,!1),q.closePath(),q.fill()),j=P}function G(e,t,a,l,n,r){let o;return null!=d.first?(o=d.first,null!=o.next?(d.first=o.next,o.next.prev=null):d.first=null):o={},null==i.first?(i.first=o,o.prev=null,o.next=null):(o.next=i.first,i.first.prev=o,i.first=o,o.prev=null),o.x=e,o.y=t,o.z=a,o.velX=l,o.velY=n,o.velZ=r,o.age=0,o.dead=!1,Math.random()<.5?o.right=!0:o.right=!1,o}function J(e){i.first==e?null!=e.next?(e.next.prev=null,i.first=e.next):i.first=null:null==e.next?e.prev.next=null:(e.prev.next=e.next,e.next.prev=e.prev),null==d.first?(d.first=e,e.prev=null,e.next=null):(e.next=d.first,d.first.prev=e,d.first=e,e.prev=null)}D(),window.addEventListener("resize",D,!1)}